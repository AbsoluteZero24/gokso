{{ define "maintenance/history" }}
<div class="app-content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6"><h3 class="mb-0">{{ .title }}</h3></div>
    </div>
  </div>
</div>

<div class="app-content">
  <div class="container-fluid">
    <div class="card shadow-sm">
      <div class="card-header border-0 bg-transparent">
        <h3 class="card-title fw-bold">Daftar Dokumen Laporan</h3>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
              <tr>
                <th class="ps-3">Periode</th>
                <th>Lokasi / Filter</th>
                <th class="text-center">Status</th>
                <th>Tgl Submit</th>
                <th>Tgl Approval</th>
                <th class="text-end pe-3">Aksi</th>
              </tr>
            </thead>
            <tbody>
              {{ range .documents }}
              <tr>
                <td class="ps-3 fw-bold">{{ .Period }}</td>
                <td>
                  <small class="text-muted d-block">{{ .Branch }}</small>
                  <span>{{ .Department }} - {{ .SubDepartment }}</span>
                </td>
                <td class="text-center">
                  {{ if eq .Status "Approved" }}
                    <span class="badge bg-success">Approved</span>
                  {{ else }}
                    <span class="badge bg-warning">Submitted</span>
                  {{ end }}
                </td>
                <td>{{ if .SubmittedAt }}{{ .SubmittedAt.Format "02/01/2006 15:04" }}{{ else }}-{{ end }}</td>
                <td>{{ if .ApprovedAt }}{{ .ApprovedAt.Format "02/01/2006 15:04" }}{{ else }}-{{ end }}</td>
                <td class="text-end pe-3">
                  <a href="/maintenance/history/detail/{{ .ID }}" class="btn btn-primary btn-sm">
                    <i class="bi bi-eye"></i> Detail
                  </a>
                </td>
              </tr>
              {{ else }}
              <tr>
                <td colspan="6" class="text-center py-4 text-muted border-bottom-0">Belum ada riwayat laporan pemeliharaan.</td>
              </tr>
              {{ end }}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}
