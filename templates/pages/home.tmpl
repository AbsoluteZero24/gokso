{{ define "home" }}
<style>
  .small-box {
    border-radius: 12px !important;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .small-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
  }
  .small-box .inner h3 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 5px;
  }
  .small-box .inner p {
    font-size: 1.1rem;
    opacity: 0.9;
  }
  .small-box-icon {
    font-size: 80px;
    top: 5px;
    right: 15px;
    opacity: 0.2;
    transition: transform 0.3s ease;
  }
  .small-box:hover .small-box-icon {
    transform: scale(1.1);
    opacity: 0.3;
  }
  .small-box-footer {
    background: rgba(0,0,0,0.1) !important;
    padding: 10px !important;
    text-transform: uppercase;
    font-weight: 600;
    font-size: 0.85rem;
  }
  
  /* Gradient Themes */
  .bg-gradient-primary { background: linear-gradient(45deg, #0d6efd, #004bb5) !important; }
  .bg-gradient-success { background: linear-gradient(45deg, #198754, #0f5a38) !important; }
  .bg-gradient-danger { background: linear-gradient(45deg, #dc3545, #a71d2a) !important; }
  .bg-gradient-warning { background: linear-gradient(45deg, #ffc107, #d39e00) !important; }

  .card {
    border-radius: 12px !important;
    border: none !important;
  }
  .card-header {
    background-color: transparent !important;
    padding: 20px !important;
    border-bottom: 1px solid rgba(0,0,0,0.05) !important;
  }
  .card-title {
    font-weight: 700;
    color: #333;
  }
</style>

<div class="app-content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6">
        <h3 class="mb-0 fw-bold text-dark">Welcome Back, <span class="text-capitalize">{{ .AdminName }}</span></h3>
        <p class="text-muted small mt-1">Sistem Manajemen Aset & Inventori GoAset</p>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-end">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<div class="app-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-3 col-6">
        <div class="small-box bg-gradient-primary text-white shadow-sm border-0">
          <div class="inner">
            <h3>{{ .totalAssets }}</h3>
            <p>Total Aset</p>
          </div>
          <div class="small-box-icon">
            <i class="bi bi-box-seam"></i>
          </div>
          <a href="/inventori/aset-laptop" class="small-box-footer link-light link-underline-opacity-0">
            Detail Inventory <i class="bi bi-arrow-right-circle ms-1"></i>
          </a>
        </div>
      </div>
      
      <div class="col-lg-3 col-6">
        <div class="small-box bg-gradient-success text-white shadow-sm border-0">
          <div class="inner">
            <h3>{{ .readyAssets }}</h3>
            <p>Aset Kondisi Baik</p>
          </div>
          <div class="small-box-icon">
            <i class="bi bi-check-circle"></i>
          </div>
          <a href="/inventori/aset-laptop" class="small-box-footer link-light link-underline-opacity-0">
            Lihat Stok <i class="bi bi-arrow-right-circle ms-1"></i>
          </a>
        </div>
      </div>
      
      <div class="col-lg-3 col-6">
        <div class="small-box bg-gradient-danger text-white shadow-sm border-0">
          <div class="inner">
            <h3>{{ .brokenAssets }}</h3>
            <p>Aset Perlu Perbaikan</p>
          </div>
          <div class="small-box-icon">
            <i class="bi bi-exclamation-triangle"></i>
          </div>
          <a href="/inventori/aset-laptop" class="small-box-footer link-light link-underline-opacity-0">
            Review Rusak <i class="bi bi-arrow-right-circle ms-1"></i>
          </a>
        </div>
      </div>
      
      <div class="col-lg-3 col-6">
        <div class="small-box bg-gradient-warning text-dark shadow-sm border-0">
          <div class="inner">
            <h3>{{ .totalEmployees }}</h3>
            <p>Total Karyawan</p>
          </div>
          <div class="small-box-icon">
            <i class="bi bi-people"></i>
          </div>
          <a href="/administration/employee" class="small-box-footer link-dark link-underline-opacity-0">
            Daftar Karyawan <i class="bi bi-arrow-right-circle ms-1"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-7">
        <div class="card mb-4 shadow-sm border-0">
          <div class="card-header">
            <h3 class="card-title"><i class="bi bi-bar-chart-fill text-primary me-2"></i>Distribusi Kategori Aset</h3>
          </div>
          <div class="card-body">
            <div id="category-chart"></div>
          </div>
        </div>
      </div>
      
      <div class="col-lg-5">
        <div class="card mb-4 shadow-sm border-0">
          <div class="card-header">
            <h3 class="card-title"><i class="bi bi-pie-chart-fill text-success me-2"></i>Status Kondisi Aset</h3>
          </div>
          <div class="card-body">
            <div id="status-chart"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <!-- apexcharts -->
    <script
      src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Category Chart
        const categoryOptions = {
          series: [{
            name: 'Jumlah Aset',
            data: [
              {{ range .categoryStats }}
                {{ .Count }},
              {{ end }}
            ]
          }],
          chart: {
            type: 'bar',
            height: 350,
            toolbar: {
              show: false
            },
            fontFamily: 'inherit'
          },
          plotOptions: {
            bar: {
              borderRadius: 4,
              horizontal: true,
              distributed: true
            }
          },
          dataLabels: {
            enabled: true
          },
          xaxis: {
            categories: [
              {{ range .categoryStats }}
                "{{ .Category }}",
              {{ end }}
            ],
          },
          colors: ['#0d6efd', '#6610f2', '#6f42c1', '#d63384', '#dc3545', '#fd7e14', '#ffc107', '#198754', '#20c997', '#0dcaf0'],
          legend: {
            show: false
          }
        };

        const categoryChart = new ApexCharts(document.querySelector("#category-chart"), categoryOptions);
        categoryChart.render();

        // Status Chart
        const statusOptions = {
          series: [
            {{ range .statusStats }}
              {{ .Count }},
            {{ end }}
          ],
          chart: {
            type: 'donut',
            height: 350,
            fontFamily: 'inherit'
          },
          labels: [
            {{ range .statusStats }}
              "{{ .Status }}",
            {{ end }}
          ],
          plotOptions: {
            pie: {
              donut: {
                size: '70%',
                labels: {
                  show: true,
                  total: {
                    show: true,
                    label: 'Total',
                    formatter: function (w) {
                      return w.globals.seriesTotals.reduce((a, b) => {
                        return a + b
                      }, 0)
                    }
                  }
                }
              }
            }
          },
          responsive: [{
            breakpoint: 480,
            options: {
              chart: {
                width: 200
              },
              legend: {
                position: 'bottom'
              }
            }
          }],
          colors: ['#198754', '#dc3545', '#ffc107', '#0d6efd', '#6c757d']
        };

        const statusChart = new ApexCharts(document.querySelector("#status-chart"), statusOptions);
        statusChart.render();
      });
    </script>
{{ end }}